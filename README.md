# Work in progress...

## Quick intro

Project works with open bus data from England.

## Next steps

1. Collect 24hours loactions of data for COTS buses
    - Crete S3 bucket
    - Script to extract it
    - Save to bucket

2. Consolidate GTFS West Middlands data for COTS buses.
    - Data description see below.
    - Save on local for now.
    - Timetable data seems to be usable from the GTFS format available here: <https://data.bus-data.dft.gov.uk/timetable/download/>
3. Extract bus/line positions for the 24hours
4. Match with schedule
    - Output should look something like: line, specific service, stop (name, lat,lon, sequence), expected time, real time, delay

### GTFS TIMETABLES SCHEMA

**agency**
agency_id,agency_name,agency_url,agency_timezone,agency_lang,agency_phone,agency_noc
OP794,"Cotswold Green","https://www.traveline.info",Europe/London,EN,"","COTS"

**route**
route_id,agency_id,route_short_name,route_long_name,route_type
11736,OP794,"8","",3

**trips**
route_id,service_id,trip_id,trip_headsign,block_id,shape_id,wheelchair_accessible
11736,422,VJee7d7050f17ec0e77e7838881e85820b049299c7,"Stroud",,RPSP84cae080771eca243c7879b005432f4088c7f123,0
11736,421,VJ501b96d8ac1789b9adc11abb347b7a0c39a9f567,"Uplands",db9cad450349fd7b9ea504c0f0f5c36a19603129,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,423,VJd3302ce7ab7acdfb25bb91016a6c207533065c8e,"Uplands",b80282232b58758f14571893d56eef57dad41aa2,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,423,VJ2d4a8e331a711f3b045cdc3b55f4f0b362d0564c,"Uplands",db9cad450349fd7b9ea504c0f0f5c36a19603129,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,423,VJ3925611e8af1877c3ef7aaac1a392b941185763e,"Uplands",,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,421,VJ6dfd5e7d9134b85746afd0c919c5fbec904e069d,"Uplands",e1db9686a8623109cdf64dcf493d9c4e8a23a446,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,423,VJ69a94bce3e5f6ca3e0a446f9afae14c87df3d74a,"Uplands",e1db9686a8623109cdf64dcf493d9c4e8a23a446,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,423,VJ7ed86393c3f7c0405827c367583198628be68c30,"Uplands",e1db9686a8623109cdf64dcf493d9c4e8a23a446,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,423,VJ0a37102689b79bd80b40534d2611e742a30ae590,"Uplands",e1db9686a8623109cdf64dcf493d9c4e8a23a446,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,422,VJ282dc767eec9f12f56ab8afee997b3e1b9320c45,"Uplands",db9cad450349fd7b9ea504c0f0f5c36a19603129,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,422,VJ53e3cd915949e906d96adb967b659cbd53294dfb,"Uplands",ccfa201d6407cd742d88cf1cc6050a03d3012548,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,422,VJ2162617ab38fe5c53539b50056e442a836aac077,"Uplands",b549a2e7fcdf04c7da7cae5f93ffc7e980e2e0ee,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,422,VJdb0c8f5b55aa121e84236ce14adb937be9e2879c,"Uplands",db9cad450349fd7b9ea504c0f0f5c36a19603129,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,422,VJe98a56ffb04d3fa78106b5b4e584bde1577125d2,"Uplands",,RPSP113b1438daed295976fb9b6ffc324b9771654363,0
11736,422,VJdeee8aca791ac019104b99e2872cfdada089c816,"Oakridge Lynch",,RPSPe1173184d60a0b4e31d6d349ae3f1c4d57d9709e,0
11736,423,VJb40aa16a4c79a9448c8a8022d49ed03be3aa2d95,"Oakridge Lynch",e1db9686a8623109cdf64dcf493d9c4e8a23a446,RPSPafd2d0a9767f4921c3ed94e12391ba28e32402bd,0

**stop times**
trip_id,arrival_time,departure_time,stop_id,stop_sequence,stop_headsign,pickup_type,drop_off_type,shape_dist_traveled,timepoint
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:25:00,08:25:00,1600GL2762,0,"",0,1,0,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:25:42,08:25:42,1600GLS676,1,"",0,0,0.265757000000000021,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:27:03,08:27:03,1600GLS720,2,"",0,0,0.780831999999999971,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:27:57,08:27:57,1600GLS140,3,"",0,0,1.12138000000000004,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:28:48,08:28:48,1600GL1674,4,"",0,0,1.44351000000000007,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:30:31,08:30:31,1600GLS228,5,"",0,0,2.0906100000000003,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:31:29,08:31:29,1600GLS226,6,"",0,0,2.45801000000000025,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:32:00,08:32:00,1600GL3683,7,"",0,0,2.65312999999999999,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:33:46,08:33:46,1600GLS224,8,"",0,0,2.98826000000000036,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:35:12,08:35:12,1600GLA36789,9,"",0,0,3.2599499999999999,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:37:17,08:37:17,1600GL4523,10,"",0,0,3.65571000000000002,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:38:59,08:38:59,1600GLS221,11,"",0,0,3.97705999999999982,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:40:00,08:40:00,1600GL4566,12,"",0,0,4.16930000000000067,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:43:04,08:43:04,1600GLS141,13,"",0,0,5.51522999999999985,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:43:33,08:43:33,1600GL4885,14,"",0,0,5.72810000000000041,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:44:00,08:44:00,1600GLS157,15,"",0,0,5.92325000000000035,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:45:09,08:45:09,1600GLS159,16,"",0,0,6.20453999999999972,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:46:03,08:46:03,1600GLS161,17,"",0,0,6.42297000000000029,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:47:13,08:47:13,1600GLS163,18,"",0,0,6.70643999999999973,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:49:00,08:49:00,1600GL457,19,"",0,0,7.13963000000000036,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:51:00,08:51:00,1600GL3192,20,"",0,0,7.60872999999999955,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:51:56,08:51:56,1600GLS274,21,"",0,0,7.87624999999999975,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:52:38,08:52:38,1600GLS272,22,"",0,0,8.07152999999999921,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:53:15,08:53:15,1600GLS270,23,"",0,0,8.24737999999999971,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:54:00,08:54:00,1600GLS282,24,"",0,0,8.45786000000000016,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:54:40,08:54:40,1600GLS182,25,"",0,0,8.74005999999999972,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:55:21,08:55:21,1600GLA36790,26,"",0,0,9.03169000000000111,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:55:57,08:55:57,1600GLA57012,27,"",0,0,9.28755999999999915,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:57:06,08:57:06,1600GLS289,28,"",0,0,9.77001000000000097,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:57:37,08:57:37,1600GLS291,29,"",0,0,9.98781999999999925,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:58:06,08:58:06,1600GLS518,30,"",0,0,10.1946000000000012,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:58:41,08:58:41,1600GLS512,31,"",0,0,10.4419000000000004,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:59:07,08:59:07,1600GLS510,32,"",0,0,10.6242000000000001,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,08:59:32,08:59:32,1600GLS508,33,"",0,0,10.8016000000000005,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,09:00:00,09:00:00,1600GL4958,34,"",0,0,10.9935000000000009,1
VJee7d7050f17ec0e77e7838881e85820b049299c7,09:01:13,09:01:13,1600GLS506,35,"",0,0,11.2629999999999999,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,09:02:00,09:02:00,1600GLS504,36,"",0,0,11.4365000000000006,0
VJee7d7050f17ec0e77e7838881e85820b049299c7,09:04:00,09:04:00,1600GL4566,37,"",1,0,11.8767999999999994,1

## Sources

Browsing interface: <https://data.bus-data.dft.gov.uk/timetable/?q=&area=&organisation=15&status=&is_pti_compliant=&start=&submitform=submit&ordering=-modified>
Docu API: <https://data.bus-data.dft.gov.uk/guidance/requirements/?section=apireference>
Docu Data Formats: <https://data.bus-data.dft.gov.uk/guidance/requirements/?section=dataformats>
Timetables API: <https://data.bus-data.dft.gov.uk/api/timetable-openapi/#/Data%20set/get_dataset__datasetID_>
Bus locations: <https://data.bus-data.dft.gov.uk/api/buslocation-openapi/>
Catalogue: <https://data.bus-data.dft.gov.uk/catalogue/>